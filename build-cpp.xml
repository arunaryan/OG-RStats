<project name="build-cpp-proxy">

	<property file="${basedir}/build.properties" />
	<property file="${solution.dir}/build.properties" />
	<property file="${og.language.file}" />
	<import file="${og.language.dir}/build-cpp.xml" />

	<target name="compile-after" depends="build-cpp.compile-after">
		<copy todir="${build.dir}/${compile.type}" failonerror="false">
			<fileset dir="${lib.dir}/bin/${compile.type}">
				<include name="ServiceRunner*" />
			</fileset>
		</copy>
    <copy todir="${build.dir}/${compile.type}" failonerror="false">
      <fileset dir="${lib.dir}/dll/${compile.type}">
        <include name="*.dll" />
      </fileset>
    </copy>
		<chmod perm="+x" dir="${build.dir}/${compile.type}" includes="ServiceRunner" />
    <delete file="${build.dir}/.FudgeBuilderFor" failonerror="false" />
    <delete file="${build.dir}/.FudgeSecondaryType" failonerror="false" />
    <delete file="${build.dir}/.GenericFudgeBuilderFor" failonerror="false" />
	</target>

	<target name="dist">
		<copy todir="${package.dir}/${package.name}/src">
			<fileset dir="${basedir}">
				<include name="*.c" />
				<include name="*.cpp" />
				<include name="*.h" />
        <exclude name="com_opengamma_*" />
			</fileset>
			<mapper type="glob" from="*" to="${ant.project.name}_*" />
		</copy>
    <copy todir="${package.dir}/${package.name}/src">
      <fileset dir="${basedir}">
        <include name="com_opengamma_*.c" />
        <include name="com_opengamma_*.h" />
      </fileset>
    </copy>
	</target>

</project>
